<!DOCTYPE html>
<html lang="fr">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

    <!-- Favicon -->
    <link rel="icon" href="https://nightlyside.github.io/blog/theme/favicon.ico" />
    <link rel="icon" type="image/png" href="https://nightlyside.github.io/blog/theme/favicon.png" />

    <!-- Browser Color -->
     <meta name="author" content="Alexandre Froehlich" />
    <meta name="description" content="Site web portfolio de Alexandre Froehlich" />

    <title>[TIPE] Un problème de route - Le modèle informatique (2/4) | Alexandre Froehlich
 | Alexandre Froehlich</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/blog/theme/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/blog/theme/css/fontawesome.css" />
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/blog/theme/css/pygments/default.css">
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/blog/theme/css/blog.css" />

    <!-- Javascript -->
    <script src="https://nightlyside.github.io/blog/theme/js/jquery.js"></script>
    <script src="https://nightlyside.github.io/blog/theme/js/bootstrap.js"></script>
    <script src="https://nightlyside.github.io/blog/theme/js/fontawesome.js"></script>
    <script src="https://nightlyside.github.io/blog/theme/js/zooming.min.js"></script>
    
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body>
    <!--
  _   _ _       _     _   _           _     _      
 | \ | (_) __ _| |__ | |_| |_   _ ___(_) __| | ___ 
 |  \| | |/ _` | '_ \| __| | | | / __| |/ _` |/ _ \
 | |\  | | (_| | | | | |_| | |_| \__ \ | (_| |  __/
 |_| \_|_|\__, |_| |_|\__|_|\__, |___/_|\__,_|\___|
          |___/             |___/                  
-->
    <div class="container-fluid">
        <div class="row">
            <!-- Fixed nav section -->
            <div class="about col-sm-12 col-md-3 col-lg-2">
                <nav class="navbar navbar-fixed-side sticky-top row">
                    <img src="https://nightlyside.github.io/blog/images/avatar.png" alt="Alexandre Froehlich" />
                    <h2 class="col-sm-12"><a href="https://nightlyside.github.io/blog">Alexandre Froehlich</a></h2>
                    <p class="col-sm-12">
                        Hobbyist programmer. Petit développeur indépendant (aka.
                        Nightlyside) dont le rêve est d’être capable de publier un projet
                        terminé. Actuellement étudiant à l'ENSTA Bretagne
                    </p>

                    <!-- Navigation -->
                    <ul class="nav-list">
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog">Accueil</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog/files/cv.pdf">CV</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog/categories">Catégories</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog/archives">Archives</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog">À propos</a>
                        </li>
                    </ul>

                    <!-- Social links -->
                    <ul class="social">
                        <a href="https://github.com/nightlyside">
                            <li><i class="fab fa-github-square"></i></li>
                        </a>
                        <a href="https://www.linkedin.com/in/alexandre-f-1102298a">
                            <li><i class="fab fa-linkedin"></i></li>
                        </a>
                        <a href="https://twitter.com/froalexandre">
                            <li><i class="fab fa-twitter-square"></i></li>
                        </a>
                        <a href="https://reddit.com/u/nightlyside">
                            <li><i class="fab fa-reddit-square"></i></li>
                        </a>
                    </ul>
                </nav>
            </div>
            <!-- Main content -->
            <div class="col-sm-12 col-md-9 col-lg-10 main">
    <img class="featured_image" src="https://nightlyside.github.io/blog//images/TIPE/sim_lineaire.jpg" alt="Image de l'article">
                 <div class="container content">
                    <!-- Insert content here -->
<h1 class="title">[TIPE] Un problème de route - Le modèle informatique (2/4)</h1>
<p class="sous-titre">
    <span class="date-poste">Posté le ven. 01 décembre 2017 dans <a href="category/python.html">python</a></span> <br>
    <span class="temps-lecture">Temps de lecture : 3 minutes</span>
</p>
<hr>
<p>Nous allons maintenant mod&eacute;liser le trafic routier pour une portion de route, en respectant les hypoth&egrave;ses donn&eacute;es et d&eacute;crites dans le dernier post. Pour cela on proc&egrave;de en 3 &eacute;tapes : on cr&eacute;e un mod&egrave;le basique &agrave; une dimension, puis on l&rsquo;&eacute;tend &agrave; 2 dimensions et on ajoute en derni&egrave;re &eacute;tape les d&eacute;viations et intersections. Ce post correspond &agrave; la premi&egrave;re phase.</p>
<p>La question qui m&rsquo;a le plus souvent &eacute;t&eacute; pos&eacute;e lorsque je d&eacute;crivais mon projet &agrave; mes camarades de classe &eacute;tait la suivante :</p>
<blockquote>
<p>Mais comment est-ce que tu choisis l&rsquo;endroit o&ugrave; va se produire l&rsquo;embouteillage ?</p>
</blockquote>
<p>A cette question je leur r&eacute;ponds simplement que je ne choisis pas ! En effet, le but de cette mod&eacute;lisation est de faire en sorte que les voitures, par leur comportement, cr&eacute;ent une congestion.</p>
<h2 id="le comportement de base des voitures">Le comportement de base des voitures</h2>
<p>En suivant l&rsquo;id&eacute;e du sujet de concours <a href="https://nightlyside.github.io/blog/files/TIPE/PSI-Informatique.pdf">CCP 2017</a> (concours d&rsquo;entr&eacute;e aux &eacute;coles d&rsquo;ing&eacute;nieur), on peut d&eacute;crire le comportement des voitures simplement en d&eacute;composant un instant t en plusieurs &eacute;tapes, en mettant &agrave; jour leur vitesse. Cette m&eacute;thode de simulation s&rsquo;appelle aussi la simulation de <strong>Nagel et Schreckenberg</strong>.</p>
<h3 id="acceleration">Acc&eacute;l&eacute;ration</h3>
<p>La premi&egrave;re &eacute;tape consiste &agrave; acc&eacute;l&eacute;rer le v&eacute;hicule d&rsquo;une case par unit&eacute; de temps. Cela correspond &agrave; une phase normale d&rsquo;acc&eacute;l&eacute;ration. On limite cependant la vitesse &agrave; la vitesse maximale de la route.</p>
<p>$$ v_k(t + 1) \rightarrow \text{min}(v_k(t) + 1,v_\text{max}) $$</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">acceleration</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">vitesses</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Augmente l'acc&eacute;l&eacute;ration du v&eacute;hicule k d'une unit&eacute;</span>
<span class="sd">    si il n'est pas &agrave; sa vitesse maximale</span>
<span class="sd">    """</span>
    <span class="n">vitesses</span><span class="p">[</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">vitesses</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>
</code></pre></div>
<h3 id="deceleration">D&eacute;c&eacute;l&eacute;ration</h3>
<p>La seconde &eacute;tape consiste &agrave; faire ralentir le v&eacute;hicule si la vitesse actuelle le fait rentrer en collision avec un autre v&eacute;hicule. Pour se faire, on calcule la distance entre le v&eacute;hicule et le pr&eacute;c&eacute;dent et on le compare &agrave; la vitesse actuelle. Si le v&eacute;hicule est trop loin, le v&eacute;hicule roule &agrave; la m&ecirc;me vitesse, mais s&rsquo;il est trop proche, le v&eacute;hicule avance jusqu&rsquo;&agrave; coller le v&eacute;hicule devant lui, sa vitesse en sera diminu&eacute;e pour simuler un freinage.</p>
<p>$$ v_k(t + 1) \rightarrow \text{min}(v_k(t + 1),d_k &minus; 1) $$</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">deceleration</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">xk</span><span class="p">,</span> <span class="n">xk1</span><span class="p">,</span> <span class="n">route</span><span class="p">,</span> <span class="n">vitesses</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    D&eacute;c&eacute;l&egrave;re si le v&eacute;hicule k ne peut pas continuer &agrave; sa vitesse </span>
<span class="sd">    actuelle (il y a un v&eacute;hicule devant)</span>
<span class="sd">    """</span>
    <span class="n">dk</span> <span class="o">=</span> <span class="n">xk1</span> <span class="o">-</span> <span class="n">xk</span> <span class="c1"># distance entre les v&eacute;hicules</span>
    <span class="c1"># mise &agrave; jour de la vitesse</span>
    <span class="n">vitesses</span><span class="p">[</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">vitesses</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="n">k</span><span class="p">],</span> <span class="n">dk</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<h3 id="facteur aleatoire">Facteur al&eacute;atoire</h3>
<p>Cette &eacute;tape correspond au ralentissement al&eacute;atoire qui peut survenir en tout temps. Pour expliquer le r&eacute;alisme d&rsquo;une telle op&eacute;ration, il faut s&rsquo;imaginer rouler sur une autoroute droite sans personne dessus &agrave; part un v&eacute;hicule qui roule (sans r&eacute;gulateur de vitesse bien s&ucirc;r). Alors il peut survenir un moment d&rsquo;inattention qui va faire ralentir al&eacute;atoirement le conducteur.</p>
<p>$$ \text{Si rand()}&lt; p \text{ alors }v_k(t + 1) \rightarrow \text{max}(v_k(t + 1) &minus; 1,0) $$</p>
<p>C&rsquo;est ce ph&eacute;nom&egrave;ne qui est repr&eacute;sent&eacute; par cette &eacute;tape, il se trouve d&rsquo;ailleurs que pour cette simulation, cette &eacute;tape est celle qui cr&eacute;e les embouteillages routiers.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">facteur_aleatoire</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">vitesses</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Facteur al&eacute;atoire de ralentissement (p)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">vitesses</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vitesses</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<h3 id="deplacement">D&eacute;placement</h3>
<p>Cette derni&egrave;re &eacute;tape permet d&rsquo;inscrire le mouvement li&eacute; &agrave; la vitesse de chaque v&eacute;hicule. C&rsquo;est &agrave; dire qu&rsquo;apr&egrave;s avoir fait la mise &agrave; jour de toutes les vitesses et en v&eacute;rifiant bien qu&rsquo;aucun v&eacute;hicule ne rentre en collision avec d&rsquo;autres, on d&eacute;place les voitures sur la route en mettant &agrave; jour leur position.</p>
<p>$$ X_n(t + 1) \rightarrow X_n(t) + v_n(t + 1) $$</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">deplacement</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">xk</span><span class="p">,</span> <span class="n">vitesses</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    D&eacute;place le v&eacute;hicule k a sa position suivante</span>
<span class="sd">    """</span>
    <span class="n">xk</span><span class="p">[</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">xk</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="n">vitesses</span><span class="p">[</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">k</span><span class="p">]</span>
</code></pre></div>
<h2 id="resultat_1">R&eacute;sultat</h2>
<p>En prenant une route d&rsquo;une certaine taille puis en initialisant la route avec un nombre de voitures donn&eacute;, on obtient un tableau de taille <em>longueur x iterations</em> qui repr&eacute;sentera la route et chaque ligne correspondra &agrave; un instant donn&eacute;. On obtient un tableau de la forme :</p>
<p><img alt="Simulation lin&eacute;aire" class="center img-zoomable" height="200px" src="https://nightlyside.github.io/blog/images/TIPE/sim_lineaire.jpg"/></p>
<p>Les conditions initiales &eacute;tant :</p>
<ul>
<li>toutes les voitures partent &agrave; la m&ecirc;me vitesse</li>
<li>toutes les voitures partent avec une distance &eacute;gale avec la pr&eacute;c&eacute;dente</li>
<li>toutes les voitures poss&egrave;dent le m&ecirc;me facteur al&eacute;atoire (80% ici)</li>
</ul>
<p>Chaque point jaune correspond &agrave; un v&eacute;hicule, le reste &eacute;tant la route. On se rend compte qu&rsquo;avec de telles hypoth&egrave;ses, un bouchon se forme (sorte d&rsquo;amas de points jaunes). Le code fonctionne !</p>
<p>Pour mieux comprendre voici une animation qui reprends chaque ligne de l&rsquo;image du dessus et la fait d&eacute;filer l&rsquo;une apr&egrave;s l&rsquo;autre. On comprends ainsi mieux pourquoi les amas de points correspondent &agrave; un embouteillage.</p>
<p><img alt="Simulation lin&eacute;aire" class="center img-zoomable" src="https://nightlyside.github.io/blog/images/TIPE/sim_lineaire_anim.gif"/></p>
<p>La prochaine &eacute;tape vue dans le prochain post sera de traduire ce code, d&rsquo;utiliser le m&ecirc;me principe et le m&ecirc;me fonctionnement mais cette fois-ci sur une grille en 2D.</p>

                    <!-- Footer -->
                    <hr>
                    <div class="container">
                        <div class="row justify-content-sm-center">
                            <p>© 2020 Alexandre Froehlich</p>
                        </div>
                    </div>
                 </div>
            </div>
        </div>
    </div>
    <script>
      // Listen to images after DOM content is fully loaded
      document.addEventListener('DOMContentLoaded', function () {
        new Zooming({
          // options...
        }).listen('.img-zoomable')
      })
    </script>
</body>

</html>