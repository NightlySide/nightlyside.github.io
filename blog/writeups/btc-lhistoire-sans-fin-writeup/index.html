<!DOCTYPE html>
<html lang="fr">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

    <!-- Favicon -->
    <link rel="icon" href="https://nightlyside.github.io/new/blog/theme/favicon.ico" />
    <link rel="icon" type="image/png" href="https://nightlyside.github.io/new/blog/theme/favicon.png" />

    <!-- Browser Color -->
     <meta name="author" content="Alexandre Froehlich" />
    <meta name="description" content="Site web portfolio de Alexandre Froehlich" />

    <title>[BTC] L'Histoire sans fin - WriteUp | Alexandre Froehlich
 | Alexandre Froehlich</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/new/blog/theme/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/new/blog/theme/css/fontawesome.css" />
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/new/blog/theme/css/pygments/default.css">
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/new/blog/theme/css/blog.css" />

    <!-- Javascript -->
    <script src="https://nightlyside.github.io/new/blog/theme/js/jquery.js"></script>
    <script src="https://nightlyside.github.io/new/blog/theme/js/bootstrap.js"></script>
    <script src="https://nightlyside.github.io/new/blog/theme/js/fontawesome.js"></script>
    <script src="https://nightlyside.github.io/new/blog/theme/js/zooming.min.js"></script>
    
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body>
    <!--
  _   _ _       _     _   _           _     _      
 | \ | (_) __ _| |__ | |_| |_   _ ___(_) __| | ___ 
 |  \| | |/ _` | '_ \| __| | | | / __| |/ _` |/ _ \
 | |\  | | (_| | | | | |_| | |_| \__ \ | (_| |  __/
 |_| \_|_|\__, |_| |_|\__|_|\__, |___/_|\__,_|\___|
          |___/             |___/                  
-->
    <div class="container-fluid">
        <div class="row">
            <!-- Fixed nav section -->
            <div class="about col-sm-12 col-md-3 col-lg-2">
                <nav class="navbar navbar-fixed-side sticky-top row">
                    <img src="https://nightlyside.github.io/new/blog/images/avatar.png" alt="Alexandre Froehlich" />
                    <h2 class="col-sm-12"><a href="https://nightlyside.github.io/new/blog">Alexandre Froehlich</a></h2>
                    <p class="col-sm-12">
                        Hobbyist programmer. Petit développeur indépendant (aka.
                        Nightlyside) dont le rêve est d’être capable de publier un projet
                        terminé. Actuellement étudiant à l'ENSTA Bretagne
                    </p>

                    <!-- Navigation -->
                    <ul class="nav-list">
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/new/blog">Accueil</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/new/blog/files/cv.pdf">CV</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/new/blog/categories">Catégories</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/new/blog/archives">Archives</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/new/blog">À propos</a>
                        </li>
                    </ul>

                    <!-- Social links -->
                    <ul class="social">
                        <a href="https://github.com/nightlyside">
                            <li><i class="fab fa-github-square"></i></li>
                        </a>
                        <a href="https://www.linkedin.com/in/alexandre-f-1102298a">
                            <li><i class="fab fa-linkedin"></i></li>
                        </a>
                        <a href="https://twitter.com/froalexandre">
                            <li><i class="fab fa-twitter-square"></i></li>
                        </a>
                        <a href="https://reddit.com/u/nightlyside">
                            <li><i class="fab fa-reddit-square"></i></li>
                        </a>
                    </ul>
                </nav>
            </div>
            <!-- Main content -->
            <div class="col-sm-12 col-md-9 col-lg-10 main">
    <img class="featured_image" src="/images/BTC/midi_post_front.jpg" alt="Image de l'article">
                 <div class="container content">
                    <!-- Insert content here -->
<h1 class="title">[BTC] L'Histoire sans fin - WriteUp</h1>
<p class="sous-titre">
    <span class="date-poste">Posté le mer. 01 janvier 2020 dans <a href="category/writeups.html">writeups</a></span> <br>
    <span class="temps-lecture">Temps de lecture : 3 minutes</span>
</p>
<hr>
<p><em>Il semblerait qu'un fragment de cl&eacute; soit cach&eacute; dans cet exercice.</em> Je me permets de vous partager un classique revisit&eacute; r&eacute;cemment par l'une de mes s&eacute;ries favorites. - This is Suzie, I copy. - Suzie! - Dusty-bun!?</p>
<p>Look at what you see.
But not only !
What is the secret of the never ending story ?
M. X. (-..-)</p>
<p>Faut pas chercher midi &agrave; quatorze heures mais plut&ocirc;t Samuel &agrave; midi ! P.S : Samuel est un morse, choisi lui la bonne piste !</p>
<hr/>
<p>Le Challenge Break the Code est une comp&eacute;tition du type Capture The Flag (CTF) organis&eacute;e par <a href="https://www.soprasteria.com/fr">Sopra Steria</a> qui dure 1h30. Les &eacute;quipes des grandes &eacute;coles du bassin brestois s&rsquo;y affrontent sur des challenges informatiques. Ces challenges m&eacute;langent diff&eacute;rentes comp&eacute;tences telles que la programmation, l&rsquo;analyse de donn&eacute;e et la culture du num&eacute;rique. </p>
<h2 id="analyse du premier fichier">Analyse du premier fichier</h2>
<p>L'histoire sans fin est la 3&egrave;me &eacute;preuve de ce CTF, le but &eacute;tant de trouver le drapeau qui est cach&eacute; dans les fichiers de l'&eacute;preuve.</p>
<blockquote>
<p>Si vous voulez essayer par vous-m&ecirc;me, les fichiers de cet exercice sont <a href="https://nightlyside.github.io/new/blog/files/BTC/histoire-sans-fin.zip">disponibles ici</a>.</p>
</blockquote>
<p>On arrive sur une premi&egrave;re difficult&eacute;. Les deux fichiers fournis ne pr&eacute;sentant pas d'extension, c'est &agrave; nous d'en retrouver le type. Pour cela plusieurs m&eacute;thodes.</p>
<p>La premi&egrave;re est la lecture du code source. Pour le fichier <code>ItCanHelp</code>, une simple ouverture avec un bloc notes nous donne un indice :</p>
<p><img alt="Code source ItCanHelp" class="center img-zoomable" src="https://nightlyside.github.io/new/blog/images/BTC/source_code.jpg"/></p>
<p>La deuxi&egrave;me m&eacute;thode est l'utilisation sous linux de la commande file : </p>
<p><img alt="Command file ItCanHelp" class="center img-zoomable" src="https://nightlyside.github.io/new/blog/images/BTC/jpg_file_cmd.jpg"/></p>
<p>Une troisi&egrave;me m&eacute;thode est l'utilisation de sites web d&eacute;tecteurs de types de fichiers tel que <a href="http://www.checkfiletype.com/">ChekFileType.com</a>.</p>
<p>On reconnait que le fichier inconnu est une image au format JPEG. Il suffit alors j'ajouter <code>.jpg</code> au nom du fichier pour en d&eacute;couvrir le contenu : </p>
<p><img alt="Contenu de ItCanHelp" class="center img-zoomable" height="200px" src="https://nightlyside.github.io/new/blog/images/BTC/ItCanHelp.jpg"/></p>
<p>On obtient le premier indice qui nous permettra de r&eacute;soudre le challenge, on aura affaire &agrave; du <strong>morse</strong>.</p>
<h2 id="analyse du second fichier">Analyse du second fichier</h2>
<p>Avec le second fichier, certaines m&eacute;thodes pr&eacute;sent&eacute;es pr&eacute;c&eacute;demment ne pourront pas fonctionner. En effet, en essayant d'ouvrir le fichier avec un bloc note, le contenu reste illisible &agrave; l'oeil nu. Pour trouver le type de fichier, la seconde comme la troisi&egrave;me m&eacute;thode montrent qu'il s'agit d'un fichier <a href="https://fr.wikipedia.org/wiki/Musical_Instrument_Digital_Interface">MIDI</a>, audio donc.  </p>
<p><img alt="Commande file NeverEndingStory" class="center img-zoomable" src="https://nightlyside.github.io/new/blog/images/BTC/midi_file_cmd.jpg"/></p>
<p>Mon premier r&eacute;fl&egrave;xe est alors de rajouter l'extension <code>.midi</code> au fichier et de l'&eacute;couter pour voir si je ne peux pas r&eacute;cup&eacute;rer d'autres indices. (petit moment g&ecirc;nant du au fait que tout le monde &eacute;tait concentr&eacute; dans son &eacute;preuve et que je joue un morceau de musique &agrave; fond sur les hauts parleurs de mon pc portable).</p>
<p>Malheureusement l'&eacute;coute de ce fichier ne me donne absolument aucun indice. Je repense alors au format du fichier. Le MIDI est un format qui permet de traduire assez facilement une partition en musique, je me suis alors souvenu que l'on pouvait &eacute;diter les fichiers MIDI ! L'&eacute;tape suivante &agrave; donc &eacute;t&eacute; de t&eacute;l&eacute;charger un &eacute;diteur, j'ai opt&eacute; pour <a href="https://www.midieditor.org/">MIDIeditor</a> qui fonctionne &agrave; la fois sous windows et linux. L'ouverture du fichier <code>NeverEndingStory</code> me donne ceci : </p>
<p><img alt="MIDI Editor" class="center img-zoomable" src="https://nightlyside.github.io/new/blog/images/BTC/midieditor.jpg"/></p>
<p>On remarque deux choses fabuleuses :
1. Il existe une piste (en violet) qui a une tonalit&eacute; constante
2. Il existe un canal correspondant qui porte un nom bien choisi : "Do you know Planck's constant ? I know it starts with two sixes, and then a ..."</p>
<p>On supprime les autres canaux, puis en zoomant sur celui qui reste on observe que le signal correspond &agrave; un code morse. Bingo !</p>
<p><img alt="Canal morse du fichier" class="center img-zoomable" src="https://nightlyside.github.io/new/blog/images/BTC/midi_solo.jpg"/></p>
<p>Ci-dessous vous retrouverez la retranscription en morse (- &eacute;tant un long, . &eacute;tant un court)</p>
<div class="highlight"><pre><span></span><code><span class="o">-....</span> <span class="o">.-.-.-</span> <span class="o">-....</span> <span class="o">..---</span> <span class="o">-....</span> <span class="o">-----</span> <span class="o">--...</span> <span class="o">-----</span> <span class="o">-----</span> <span class="o">....-</span> <span class="o">---</span> <span class="o">....</span> <span class="o">-</span> <span class="o">....</span> <span class="o">.-</span> <span class="o">-.</span> <span class="o">-.-</span> <span class="o">...</span> <span class="o">...</span> <span class="o">..-</span> <span class="o">--..</span> <span class="o">..</span> <span class="o">.</span> <span class="o">..-.</span> <span class="o">---</span> <span class="o">.-.</span> <span class="o">-</span> <span class="o">....</span> <span class="o">.-</span> <span class="o">-</span> <span class="o">..</span> <span class="o">...</span> <span class="o">-</span> <span class="o">....</span> <span class="o">.</span> <span class="o">-.-</span> <span class="o">.</span> <span class="o">-.--</span>
</code></pre></div>
<p>Il suffit alors de d&eacute;cripter le message avec un site comme <a href="https://www.dcode.fr/code-morse">dcode.fr</a> qui nous retourne le flag (drapeau) suivant : <code>6.62607004OHTHANKSSUZIEFORTHATISTHEKEY</code></p>
<h2 id="conclusion">Conclusion</h2>
<p>Ce challenge en temps r&eacute;el m'a prit pr&egrave;s de 40 minutes &agrave; r&eacute;soudre. Je n'avais pas les outils ad&eacute;quats et le stress s'ajoutant, j'ai commis des erreurs qui auraient pu me faire gagner en vitesse.</p>
<p>Cependant ce challenge repr&eacute;sentait &agrave; lui tout seul 55 points sur le challenge, en ajoutant les 10 points de bonus en &eacute;tant la premi&egrave;re &eacute;quipe a avoir trouv&eacute; ce challenge (et finalement la seule sur les deux repr&eacute;sentations de l'&eacute;preuve &agrave; Rennes et Brest), cela a fait pr&egrave;s de 65 points d'un coup.</p>
<p>Je me suis &eacute;clat&eacute; pendant la r&eacute;solution de ce challenge dont les indices &eacute;taient nombreux et j'esp&egrave;re qu'au travers de ces quelques lignes vous avez pu exp&eacute;rimenter ce m&ecirc;me enthousiasthme !</p>

                    <!-- Footer -->
                    <hr>
                    <div class="container">
                        <div class="row justify-content-sm-center">
                            <p>© 2020 Alexandre Froehlich</p>
                        </div>
                    </div>
                 </div>
            </div>
        </div>
    </div>
    <script>
      // Listen to images after DOM content is fully loaded
      document.addEventListener('DOMContentLoaded', function () {
        new Zooming({
          // options...
        }).listen('.img-zoomable')
      })
    </script>
</body>

</html>