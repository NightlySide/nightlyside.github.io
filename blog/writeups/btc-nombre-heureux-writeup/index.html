<!DOCTYPE html>
<html lang="fr">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

    <!-- Favicon -->
    <link rel="icon" href="https://nightlyside.github.io/blog/theme/favicon.ico" />
    <link rel="icon" type="image/png" href="https://nightlyside.github.io/blog/theme/favicon.png" />

    <!-- Browser Color -->
     <meta name="author" content="Alexandre Froehlich" />
    <meta name="description" content="Site web portfolio de Alexandre Froehlich" />

    <title>[BTC] Nombre heureux - WriteUp | Alexandre Froehlich
 | Alexandre Froehlich</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/blog/theme/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/blog/theme/css/fontawesome.css" />
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/blog/theme/css/pygments/default.css">
    <link rel="stylesheet" type="text/css" href="https://nightlyside.github.io/blog/theme/css/blog.css" />

    <!-- Javascript -->
    <script src="https://nightlyside.github.io/blog/theme/js/jquery.js"></script>
    <script src="https://nightlyside.github.io/blog/theme/js/bootstrap.js"></script>
    <script src="https://nightlyside.github.io/blog/theme/js/fontawesome.js"></script>
    <script src="https://nightlyside.github.io/blog/theme/js/zooming.min.js"></script>
    
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body>
    <!--
  _   _ _       _     _   _           _     _      
 | \ | (_) __ _| |__ | |_| |_   _ ___(_) __| | ___ 
 |  \| | |/ _` | '_ \| __| | | | / __| |/ _` |/ _ \
 | |\  | | (_| | | | | |_| | |_| \__ \ | (_| |  __/
 |_| \_|_|\__, |_| |_|\__|_|\__, |___/_|\__,_|\___|
          |___/             |___/                  
-->
    <div class="container-fluid">
        <div class="row">
            <!-- Fixed nav section -->
            <div class="about col-sm-12 col-md-3 col-lg-2">
                <nav class="navbar navbar-fixed-side sticky-top row">
                    <img src="https://nightlyside.github.io/blog/images/avatar.png" alt="Alexandre Froehlich" />
                    <h2 class="col-sm-12"><a href="https://nightlyside.github.io/blog">Alexandre Froehlich</a></h2>
                    <p class="col-sm-12">
                        Hobbyist programmer. Petit développeur indépendant (aka.
                        Nightlyside) dont le rêve est d’être capable de publier un projet
                        terminé. Actuellement étudiant à l'ENSTA Bretagne
                    </p>

                    <!-- Navigation -->
                    <ul class="nav-list">
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog">Accueil</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog/files/cv.pdf">CV</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog/categories">Catégories</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog/archives">Archives</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-item-separator">//</span><a href="https://nightlyside.github.io/blog">À propos</a>
                        </li>
                    </ul>

                    <!-- Social links -->
                    <ul class="social">
                        <a href="https://github.com/nightlyside">
                            <li><i class="fab fa-github-square"></i></li>
                        </a>
                        <a href="https://www.linkedin.com/in/alexandre-f-1102298a">
                            <li><i class="fab fa-linkedin"></i></li>
                        </a>
                        <a href="https://twitter.com/froalexandre">
                            <li><i class="fab fa-twitter-square"></i></li>
                        </a>
                        <a href="https://reddit.com/u/nightlyside">
                            <li><i class="fab fa-reddit-square"></i></li>
                        </a>
                    </ul>
                </nav>
            </div>
            <!-- Main content -->
            <div class="col-sm-12 col-md-9 col-lg-10 main">
    <img class="featured_image" src="/images/BTC/annuaire.jpg" alt="Image de l'article">
                 <div class="container content">
                    <!-- Insert content here -->
<h1 class="title">[BTC] Nombre heureux - WriteUp</h1>
<p class="sous-titre">
    <span class="date-poste">Posté le mer. 01 janvier 2020 dans <a href="category/writeups.html">writeups</a></span> <br>
    <span class="temps-lecture">Temps de lecture : 3 minutes</span>
</p>
<hr>

<p>En fouillant dans la cl&eacute; USB, vous tombez sur un dossier contenant un morceau d'annuaire t&eacute;l&eacute;phonique, et un fichier contenant des instructions.</p>
<p>"Depuis quelques mois, un de mes coll&egrave;gues me harc&egrave;le et j'ai peur qu'il finisse par me faire du mal. Des fois qu'il tomberait sur ce document, je pr&eacute;f&egrave;re ne pas le citer directement ..." </p>
<p>Aidez la police en trouvant l'identit&eacute; de la personne dont M. X parle.</p>
<hr/>
<p>Le Challenge Break the Code est une comp&eacute;tition du type Capture The Flag (CTF) organis&eacute;e par <a href="https://www.soprasteria.com/fr">Sopra Steria</a> qui dure 1h30. Les &eacute;quipes des grandes &eacute;coles du bassin brestois s&rsquo;y affrontent sur des challenges informatiques. Ces challenges m&eacute;langent diff&eacute;rentes comp&eacute;tences telles que la programmation, l&rsquo;analyse de donn&eacute;e et la culture du num&eacute;rique. </p>
<h2 id="premiere analyse">Premi&egrave;re Analyse</h2>
<p>Nombre heureux est la 7&egrave;me &eacute;preuve de ce CTF, le but &eacute;tant de trouver un num&eacute;ro de t&eacute;l&eacute;phone pr&eacute;sent dans l'annuaire de l'exercice.</p>
<blockquote>
<p>Si vous voulez essayer par vous-m&ecirc;me, les fichiers de cet exercice sont disponibles <a href="https://nightlyside.github.io/blog/files/BTC/nombre-heureux.zip">ici</a>.</p>
</blockquote>
<p>Pour retrouver ce num&eacute;ro l'exercice nous donne des instructions, il s'agit de la somme des nombres qui remplissent les conditions suivantes :  </p>
<ul>
<li>&ecirc;tre compris entre 0 et 200 000 <strong>inclus</strong></li>
<li>&ecirc;tre heureux</li>
<li>&ecirc;tre impair</li>
<li>&ecirc;tre premier</li>
</ul>
<p>Comme Break The Code est une comp&eacute;tition de rapidit&eacute;, pour le prototypage de l'algorithme j'ai d&eacute;cid&eacute; de choisir python.</p>
<h2 id="conception de l'algorithme">Conception de l'algorithme</h2>
<h3 id="nombre heureux">Nombre heureux</h3>
<p>L'exercice nous d&eacute;finit un nombre heureux de la sorte :
Partant de n'importe quel entier positif, remplacer cet entier par la somme des carr&eacute;s des chiffres qui le composent, et r&eacute;p&eacute;ter le processus jusqu'&agrave; ce que le nombre soit &eacute;gal &agrave; 1 (auquel cas le nombre est qualifi&eacute; de "heureux"). Si le processus boucle (i.e. on repasse sur un nombre d&eacute;ja obtenu lors d'une &eacute;tape pr&eacute;c&eacute;dente), alors le chiffre n'est pas "heureux" et le processus peut &ecirc;tre stopp&eacute;.</p>
<p>Un algorithme na&iuml;f est une fonction r&eacute;cursive permettant de d&eacute;terminer si le nombre est heureux ou non : </p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">heureux</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="c1"># Si on entre dans une boucle</span>
    <span class="c1"># Le nombre n'est pas heureux</span>
    <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">145</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">20</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="n">s_k</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    <span class="n">s</span><span class="o">=</span><span class="mi">0</span>
    <span class="c1"># Calcul de la somme des carr&eacute;s des chiffres de k</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">s_k</span><span class="p">:</span>
       <span class="n">s</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
    <span class="c1"># On r&eacute;it&egrave;re</span>
    <span class="k">return</span> <span class="n">heureux</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>La m&eacute;thode que je recommande dans ce genre de cas (pour des calculs "classiques") est de chercher un algorithme pr&eacute;fait sur internet.
Par exemple <a href="http://www.developpement-informatique.com/article/98/exercices-corriges-python-serie-9">celui-ci</a> fera tr&egrave;s bien l'affaire et pourra vous faire gagner 10-15 minutes sur l'exercice.</p>
</blockquote>
<h3 id="nombre impair et premier">Nombre impair et premier</h3>
<p>En python la syntaxe pour v&eacute;rifier si un nombre est impair est tr&egrave;s simple : </p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">impair</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">!=</span><span class="mi">0</span>
</code></pre></div>
<p>Pour savoir si il est premier, le plus rapide sera de chercher un algorithme pr&eacute;fait sur internet. Dans le contexte de cet exercice j'ai utilis&eacute; <a href="https://stackoverflow.com/a/27946768">celui-ci</a>.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span><span class="p">,</span> <span class="n">islice</span>
<span class="k">def</span> <span class="nf">premier</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">n</span><span class="o">%</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">islice</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>
</code></pre></div>
<h3 id="ecriture de la boucle">Ecriture de la boucle</h3>
<p>Il ne reste plus qu'&agrave; it&eacute;rer sur chaque nombre et de calculer la somme : </p>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">somme</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Pour tous les nombres de 1 &agrave; 200 000 inclus</span>
    <span class="c1"># 0 n'&eacute;tant pas impair</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">200001</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">heureux</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="ow">and</span> <span class="n">impair</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="ow">and</span> <span class="n">premier</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">somme</span> <span class="o">+=</span> <span class="n">n</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Le num&eacute;ro de t&eacute;l&eacute;phone est : </span><span class="si">{</span><span class="n">somme</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>
<p>On r&eacute;cup&egrave;re finalement en sortie de notre algorithme : <em>Le num&eacute;ro de t&eacute;l&eacute;phone est : 254445710</em>.</p>
<p>La toute derni&egrave;re &eacute;tape est de v&eacute;rifier que le num&eacute;ro est bien pr&eacute;sent dans l'annuaire.
Il est effectivement pr&eacute;sent et il s'agit de <strong>Michael Scarn</strong> qui repr&eacute;sente le flag (drapeau) de cet exercice.</p>
<h2 id="conclusion_1">Conclusion</h2>
<p>Ce challenge est relativement simple, il s'agit plus d'une &eacute;preuve de programmation que d'une enqu&ecirc;te digne d'un CTF.
Cependant il peut s'av&eacute;rer &ecirc;tre un v&eacute;ritable challenge si on souhaite recoder "&agrave; la main" chaque fonction utilis&eacute;e dans cet exercice.
Internet &agrave; &eacute;t&eacute; invent&eacute; dans le but de partager les connaissances. Si les CTF tels que Break The Code autorisent son utilisation durant le challenge c'est bien pour que l'on s'en serve !</p>
<p>PS: vous retrouverez le script python complet <a href="https://nightlyside.github.io/blog/files/BTC/nombre-heureux.py">ici</a>.</p>

                    <!-- Footer -->
                    <hr>
                    <div class="container">
                        <div class="row justify-content-sm-center">
                            <p>© 2020 Alexandre Froehlich</p>
                        </div>
                    </div>
                 </div>
            </div>
        </div>
    </div>
    <script>
      // Listen to images after DOM content is fully loaded
      document.addEventListener('DOMContentLoaded', function () {
        new Zooming({
          // options...
        }).listen('.img-zoomable')
      })
    </script>
</body>

</html>