{"version":3,"sources":["webpack:///./src/components/post/table-of-contents.tsx","webpack:///./src/hooks/use-active-hash.tsx","webpack:///./src/templates/Project.tsx"],"names":["TableOfContents","post","targetedIds","useMemo","headings","map","heading","id","length","activeHash","itemIds","rootMargin","undefined","useState","setActiveHash","useEffect","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","target","element","document","getElementById","observe","unobserve","useActiveHash","querySelectorAll","a","classList","remove","add","activeLink","className","index","key","to","depth","value","pageQuery","ProjectTemplate","data","pageContext","markdownRemark","title","frontmatter","description","excerpt","fluid","image","childImageSharp","alt","date","timeToRead","dangerouslySetInnerHTML","__html","html"],"mappings":"iIAwDeA,IA9CS,SAAC,GAAmC,IAAjCC,EAAiC,EAAjCA,KACnBC,EAAcC,mBAAQ,WAAM,MAChC,iBAAOF,EAAKG,gBAAZ,aAAO,EAAeC,KAAI,SAACC,GAAD,OAAaA,EAAQC,QAC9C,CAACN,IAEJ,GAA2B,IAAvBC,aAAA,EAAAA,EAAaM,QAAa,OAAO,8BAErC,IAAMC,ECfqB,SAACC,EAAmBC,QAA2B,IAA3BA,WAAaC,GAAc,MACtCC,mBAAS,IAAtCJ,EADmE,KACvDK,EADuD,KA4B1E,OAzBAC,qBAAU,WACR,IAAMC,EAAW,IAAIC,sBACnB,SAACC,GACCA,EAAQC,SAAQ,SAACC,GACXA,EAAMC,gBACRP,EAAcM,EAAME,OAAOf,SAIjC,CAAEI,WAAYA,GAAc,kBAQ9B,OALAD,EAAQS,SAAQ,SAACZ,GACf,IAAMgB,EAAUC,SAASC,eAAelB,GACpCgB,GAASP,EAASU,QAAQH,MAGzB,WACLb,EAAQS,SAAQ,SAACZ,GACf,IAAMgB,EAAUC,SAASC,eAAelB,GACpCgB,GAASP,EAASW,UAAUJ,SAGnC,IAEId,EDbYmB,CAAc1B,GAmBjC,OAjBAa,qBAAU,WACSS,SAASK,iBAAT,UAERV,SAAQ,SAACW,GAChBA,EAAEC,UAAUC,OAAO,kBACnBF,EAAEC,UAAUC,OAAO,eACnBF,EAAEC,UAAUE,IAAI,qBAGlB,IAAMC,EAAaV,SAASK,iBAAT,mBAAkDpB,EAAlD,MAEfyB,EAAW1B,SACb0B,EAAW,GAAGH,UAAUC,OAAO,kBAC/BE,EAAW,GAAGH,UAAUE,IAAI,kBAE7B,CAACxB,IAGF,2BAAO0B,UAAU,kEACf,yBAAKA,UAAU,sBACb,wBAAIA,UAAU,6DAAd,qBACClC,EAAKG,UACJH,EAAKG,SAASC,KAAI,SAACC,EAAS8B,GAC1B,OACE,kBAAC,OAAD,CACEC,IAAKD,EACLE,GAAE,IAAMhC,EAAQC,GAChB4B,UAAS,2CAA6C,GAAK7B,EAAQiC,MAAQ,GAAlE,mBACRjC,EAAQkC,c,kCE/CzB,mIA2DaC,GA3Db,UA2DyB,cAqCVC,UA7E0B,SAAC,GAA0B,IAAxBC,EAAwB,EAAxBA,KACpC1C,GAD4D,EAAlB2C,YACnCD,EAAKE,gBAElB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMC,MAAO7C,EAAK8C,YAAYD,MAAOE,YAAa/C,EAAKgD,UACvD,kBAAC,IAAD,CACEC,MAAOjD,EAAK8C,YAAYI,MAAMC,gBAAgBF,MAC9CG,IAAQpD,EAAK8C,YAAYD,MAAtB,gBACHX,UAAU,aAEZ,6BAASA,UAAU,2DACjB,yBAAKA,UAAU,uCACb,0BAAMA,UAAU,qBACd,4BAAQA,UAAU,QAChB,uBAAGA,UAAU,0BACVlC,EAAK8C,YAAYO,KADpB,MAC6BrD,EAAKsD,WADlC,mBAGA,wBAAIpB,UAAU,mDAAmDlC,EAAK8C,YAAYD,QAEpF,6BACE,yBAAKX,UAAU,OAAOqB,wBAAyB,CAAEC,OAAQxD,EAAKyD,UAGlE,kBAAC,IAAD,CAAiBzD,KAAMA,S","file":"component---src-templates-project-tsx-0605c95ad0ba33af4a5e.js","sourcesContent":["import React, { useEffect, useMemo } from \"react\";\nimport { Link } from \"gatsby\";\n\nimport { Post } from \"../../../types/post\";\nimport { useActiveHash } from \"../../hooks/use-active-hash\";\n\ninterface TableOfContentsProps {\n  post: Post;\n}\n\nconst TableOfContents = ({ post }: TableOfContentsProps) => {\n  const targetedIds = useMemo(() => {\n    return post.headings?.map((heading) => heading.id);\n  }, [post]);\n\n  if (targetedIds?.length == 0) return <div></div>;\n\n  const activeHash = useActiveHash(targetedIds as string[]);\n\n  useEffect(() => {\n    const ToClinks = document.querySelectorAll(`.toc a`);\n\n    ToClinks.forEach((a) => {\n      a.classList.remove(\"text-secondary\");\n      a.classList.remove(\"text-accent\");\n      a.classList.add(\"text-secondary\");\n    });\n\n    const activeLink = document.querySelectorAll(`.toc a[href$=\"${\"/#\" + activeHash}\"]`);\n\n    if (activeLink.length) {\n      activeLink[0].classList.remove(\"text-secondary\");\n      activeLink[0].classList.add(\"text-accent\");\n    }\n  }, [activeHash]);\n\n  return (\n    <aside className=\"sticky hidden lg:block pl-8 pt-8 max-h-0.5 flex-shrink-0 top-0\">\n      <nav className=\"toc text-secondary\">\n        <h2 className=\"mb-2 font-normal text-accent tracking-widestest uppercase\">Table of contents</h2>\n        {post.headings &&\n          post.headings.map((heading, index) => {\n            return (\n              <Link\n                key={index}\n                to={`#${heading.id}`}\n                className={`block mt-3 text-sm hover:text-accent ml-${4 * (heading.depth - 2)} text-secondary`}>\n                {heading.value}\n              </Link>\n            );\n          })}\n      </nav>\n    </aside>\n  );\n};\n\nexport default TableOfContents;\n","import { useEffect, useState } from \"react\";\n\nexport const useActiveHash = (itemIds: string[], rootMargin = undefined) => {\n  const [activeHash, setActiveHash] = useState(``);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            setActiveHash(entry.target.id);\n          }\n        });\n      },\n      { rootMargin: rootMargin || `0% 0% -50% 0%` },\n    );\n\n    itemIds.forEach((id: string) => {\n      const element = document.getElementById(id);\n      if (element) observer.observe(element);\n    });\n\n    return () => {\n      itemIds.forEach((id: string) => {\n        const element = document.getElementById(id);\n        if (element) observer.unobserve(element);\n      });\n    };\n  }, []);\n\n  return activeHash;\n};\n","import React from \"react\";\nimport Img from \"gatsby-image\";\nimport { Link, graphql } from \"gatsby\";\n\nimport MainLayout from \"../components/core/main-layout\";\nimport Head from \"../components/core/head\";\nimport TableOfContents from \"../components/post/table-of-contents\";\nimport { Post } from \"../../types/post\";\n\nimport \"../styles/post.css\";\n\ninterface Props {\n  readonly data: PageQueryData;\n  readonly pageContext: {\n    previous?: any;\n    next?: any;\n  };\n}\n\nconst ProjectTemplate: React.FC<Props> = ({ data, pageContext }) => {\n  const post = data.markdownRemark;\n\n  return (\n    <MainLayout>\n      <Head title={post.frontmatter.title} description={post.excerpt} />\n      <Img\n        fluid={post.frontmatter.image.childImageSharp.fluid}\n        alt={`${post.frontmatter.title} header image`}\n        className=\"max-h-48\"\n      />\n      <article className=\"container m-auto px-5 sm:px-12 md:px-20 max-w-screen-xl\">\n        <div className=\"flex justify-between my-12 relative\">\n          <main className=\"prose md:prose-lg\">\n            <header className=\"mb-4\">\n              <p className=\"text-sm text-secondary\">\n                {post.frontmatter.date} â€¢ {post.timeToRead} min de lecture\n              </p>\n              <h1 className=\"text-primary text-4xl font-black tracking-tight\">{post.frontmatter.title}</h1>\n            </header>\n            <div>\n              <div className=\"post\" dangerouslySetInnerHTML={{ __html: post.html as string }} />\n            </div>\n          </main>\n          <TableOfContents post={post} />\n        </div>\n      </article>\n    </MainLayout>\n  );\n};\n\ninterface PageQueryData {\n  site: {\n    siteMetadata: {\n      title: string;\n    };\n  };\n  markdownRemark: Post;\n}\n\nexport const pageQuery = graphql`\n  query ProjectBySlug($slug: String!) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      id\n      excerpt(pruneLength: 2500)\n      tableOfContents\n      timeToRead\n      html\n      frontmatter {\n        date(formatString: \"MMMM DD, YYYY\")\n        title\n        slug\n        tags\n        layout\n        published\n        image {\n          childImageSharp {\n            fluid(maxWidth: 800) {\n              ...GatsbyImageSharpFluid\n            }\n          }\n        }\n      }\n      headings {\n        value\n        depth\n        id\n      }\n    }\n  }\n`;\n\nexport default ProjectTemplate;\n"],"sourceRoot":""}