<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Un petit bonus pour ce projet. Je cherche maintenant à représenter la vitesse de chaque véhicule afin d’avoir une idée plus précise sur la fluidité du trafic...">
  <meta name="keywords" content="Programming, Python, and CPGE">
  <meta name="author" content="Un problème de route - Bonus | Nightlyside's corner">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#f5f5f5">

  <!-- Twitter Tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Un problème de route - Bonus | Nightlyside's corner">
  <meta name="twitter:description" content="Un petit bonus pour ce projet. Je cherche maintenant à représenter la vitesse de chaque véhicule afin d’avoir une idée plus précise sur la fluidité du trafic...">
  <meta name="twitter:image" content="https://nightlyside.github.io/img/boyplusdog.png">

  <!-- Open Graph Tags -->
  <meta content="Nightlyside's corner" property="og:site_name">
  
    <meta content="Un problème de route - Bonus" property="og:title">
  

  
    <meta content="article" property="og:type">
  

  
    <meta content="<p>Un petit bonus pour ce projet. Je cherche maintenant à représenter la vitesse de chaque véhicule afin d’avoir une idée plus précise sur la fluidité du trafic routier. Il y a certe peu de modifications à faire, mais cela en vaut le coup.</p>

" property="og:description">
  

  
    <meta content="https://nightlyside.github.io/articles/2018-03/un-probleme-de-route-bonus" property="og:url">
  

  
    <meta content="2018-03-21T11:39:02+01:00" property="article:published_time">
    <meta content="https://nightlyside.github.io/cv/" property="article:author">
  

  
    <meta content="https://nightlyside.github.io/img/TIPE/sim_vitesse_front.jpg" property="og:image">
  

  
    
    <meta content="TIPE" property="article:section">
    
  

  
    
    <meta content="code" property="article:tag">
    
    <meta content="routier" property="article:tag">
    
    <meta content="TIPE" property="article:tag">
    
    <meta content="python" property="article:tag">
    
  


  
  <title>Un problème de route - Bonus | Nightlyside's corner</title>

  <!-- CSS files -->
  <link rel="stylesheet" href="https://nightlyside.github.io/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://nightlyside.github.io/css/main.css">

  <link rel="canonical" href="https://nightlyside.github.io/articles/2018-03/un-probleme-de-route-bonus">
  <link rel="alternate" type="application/rss+xml" title="Nightlyside's corner" href="https://nightlyside.github.io /feed.xml " />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="https://nightlyside.github.io/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="https://nightlyside.github.io/favicon.png">

  <!--scripts -->
  <script src="/js/jquery-3.2.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
  </script>

</head>


<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
        

<div class="cover-card table-cell table-middle">
  
  <img src="https://nightlyside.github.io/img/boyplusdog.png" alt="" class="avatar">
  
  <a href="https://nightlyside.github.io/" class="author_name">alexandre f</a>
  <span class="author_job">Hobbyist programmer</span>
  <span class="author_bio mbm">Petit développeur indépendant (aka. Nightlyside) dont le rêve est d’être capable de publier un projet terminé. Actuellement étudiant en CPGE (PSI* Lycée Kléber)</span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="https://nightlyside.github.io/">accueil</a>
        <span>/</span>
      </li>
       
      <li class="nav-item">
        <a href="https://nightlyside.github.io/archive/">archive</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="https://nightlyside.github.io/cv/">CV</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="https://nightlyside.github.io/categories/">categories</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="https://nightlyside.github.io/tags/">tags</a>
        
      </li>
       
    </ul>
  </nav>
  <script type="text/javascript">
  // based on http://stackoverflow.com/a/10300743/280842
  function gen_mail_to_link(hs, subject) {
    var lhs,rhs;
    var p = hs.split('@');
    lhs = p[0];
    rhs = p[1];
    document.write("<a class=\"social-link-item\" target=\"_blank\" href=\"mailto");
    document.write(":" + lhs + "@");
    document.write(rhs + "?subject=" + subject + "\"><i class=\"fa fa-fw fa-envelope\"></i><\/a>");
  }
</script>
<div class="social-links">
  <ul>
    
      <li>
      <script>gen_mail_to_link('nightlyside@gmail.com', 'Hello from website');</script>
      </li>
    
    
    <li><a href="http://facebook.com/alexandre.froehlich.1" class="social-link-item" target="_blank"><i class="fa fa-fw fa-facebook"></i></a></li>
    
    
    
    
    
    <li><a href="http://github.com/NightlySide" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        
<div class="post-top-image">
  <img class="feature-image" src=
  
  "https://nightlyside.github.io/img/TIPE/sim_vitesse_front.jpg"
  
  alt="Un problème de route - Bonus feature image">

  
</div><!-- /.image-wrap -->


<a class="btn" href= "https://nightlyside.github.io/" >
  Home
</a>

<div id="post">
  <header class="post-header">
    <h1 title="Un problème de route - Bonus">Un problème de route - Bonus</h1>
    <span class="post-meta">
      <span class="post-date">
        21 MAR 2018
      </span>
      •
      <span class="read-time" title="Estimated read time">
  
  
    3 mins read
  
</span>

    </span>

  </header>

  <article class="post-content col l11 s12">
    <p>Un petit bonus pour ce projet. Je cherche maintenant à représenter la vitesse de chaque véhicule afin d’avoir une idée plus précise sur la fluidité du trafic routier. Il y a certe peu de modifications à faire, mais cela en vaut le coup.</p>

<!--more-->

<h2 id="pourquoi-une-telle-représentation">Pourquoi une telle représentation</h2>

<p>L’idée m’est venue en lisant des articles sur la représentation de Nagel-Schreckenberg. Après avoir flâné quelques temps sur wikipédia, j’ai décidé de changer la langue de la page afin de voir si d’autres contributeurs non francophones avaient étoffés leur page plus que ça n’est le cas sur celle française.</p>

<p>A ma grande surprise, la <a href="https://de.wikipedia.org/wiki/Nagel-Schreckenberg-Modell" target="_blank">page allemande du model de Nagel Schreckenberg</a> montre une représentation du model plutôt ingénieuse : donner une couleur par véhicule en fonction de la vitesse de circulation de celui-ci. <em>(voir figure ci-dessous)</em></p>

<p><img src="https://nightlyside.github.io/img/TIPE/NaSch.png" alt="Représentation" height="300px" /></p>

<p>Maintenant on va modifier le code source de notre étude afin d’y implémenter cette nouvelle fonctionalité.</p>

<h2 id="implémentation">Implémentation</h2>

<p>La première étape est de modifier la fonction qui place les véhicules. En effet, précedemment, pour placer une voiture sur la carte, la simulation ajoutait un <script type="math/tex">2</script> sur la case correspondante.</p>

<p>Maintenant nous allons remplacer la fonction <code class="highlighter-rouge">placerVoiture</code> de la classe <em>Carte</em> par le bout de code suivant :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">placerVoiture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">voiture</span><span class="p">):</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">voiture</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">voiture</span><span class="o">.</span><span class="n">getVitesse</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</code></pre></div></div>

<p>La seule grande différence est que l’on calcule la valeur de la case par <code class="highlighter-rouge">2 + vitesse de la voiture</code>.</p>

<p>Cela nous amène à notre seconde modification, en effet, pour détecter la présence d’une voiture, on récupérait la valeur d’une case de la carte que l’on comparait à <script type="math/tex">2</script>. 
On remplace alors toutes les occurence par <code class="highlighter-rouge">&gt;= 2</code> ce qui permettera de détecter la présence d’une voiture quelque soit sa vitesse</p>

<h2 id="affichage">Affichage</h2>

<p>On a maintenant l’ajout des vitesses des voitures sur la carte, il est grand temps de les afficher ! 
Pour cela on change légèrement la liste des couleurs de <em>matplotlib.pyplot</em> par :</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="s">'white'</span><span class="p">,</span> <span class="s">'palegreen'</span><span class="p">,</span> <span class="s">'antiquewhite'</span><span class="p">,</span> <span class="s">'yellow'</span><span class="p">,</span> <span class="s">'orange'</span><span class="p">,</span> <span class="s">'orangered'</span><span class="p">,</span> <span class="s">'firebrick'</span><span class="p">,</span> <span class="s">'darkred'</span><span class="p">,</span> <span class="s">'black'</span><span class="p">]</span>
</code></pre></div></div>
<p>Ainsi une voiture à l’arrêt sera de couleur jaune et tendra vers le rouge en accélérant, puis sera noire à vitesse maximale. Le seul problème avec <em>matplotlib</em> est que si il n’y a pas au moins une occurence de chaque couleur, il n’affichera pas correctement la couleur de la route et des véhicules.
On ajoute alors à la représentation de la carte une unique ligne de pixels contenant toutes les valeurs de la vitesse afin quelles soient toutes représentées :</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tableau</span> <span class="o">=</span> <span class="n">tableau</span> <span class="o">+</span> <span class="p">[</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">vmax</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tableau</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">vmax</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))]</span> <span class="p">]</span>
</code></pre></div></div>

<p>C’est tout ce qu’il y avait à faire !! (oui j’ai passé près de 2 heures sur ces modifications) Le résultat est vraiment satisfaisant par contre.</p>

<p><img src="https://nightlyside.github.io/img/TIPE/sim_vitesse.png" alt="Vitesses" height="300px" /></p>

  </article>
</div>

<div class="row"></div>

<div class="share-buttons">
  <h6>Share on: </h6>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=https://nightlyside.github.io/articles/2018-03/un-probleme-de-route-bonus" class="twitter btn" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://nightlyside.github.io/articles/2018-03/un-probleme-de-route-bonus" class="facebook btn" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=https://nightlyside.github.io/articles/2018-03/un-probleme-de-route-bonus" class="google-plus btn" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
    <li>
      <a href="https://news.ycombinator.com/submitlink?u=https://nightlyside.github.io/articles/2018-03/un-probleme-de-route-bonus" class="hacker-news btn" title="Share on Hacker News"><i class="fa fa-hacker-news"></i><span> Hacker News</span></a>
    </li>
    <li>
      <a href="https://www.reddit.com/submit?url=https://nightlyside.github.io/articles/2018-03/un-probleme-de-route-bonus" class="reddit btn" title="Share on Reddit"><i class="fa fa-reddit"></i><span> Reddit</span></a>
    </li>
  </ul>
</div><!-- end share-buttons -->


<div id="disqus_thread"></div>
<script>

    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    
    var disqus_config = function () {
    this.page.url = "https://nightlyside.github.io/articles/2018-03/un-probleme-de-route-bonus;  // Replace PAGE_URL with your page's canonical URL variable";
    this.page.identifier = "/articles/2018-03/un-probleme-de-route-bonus"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    
(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://nightlysides-corner.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            


        <footer>
  &copy; 2018 alexandre f. Powered by <a href="http://jekyllrb.com/">Jekyll</a> made with <i class="fa fa-heart heart-icon"></i>
</footer>

      </div>
    </div>
  </div>
  <script type="text/javascript" src="https://nightlyside.github.io/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://nightlyside.github.io/js/main.js"></script>


</body>
</html>
