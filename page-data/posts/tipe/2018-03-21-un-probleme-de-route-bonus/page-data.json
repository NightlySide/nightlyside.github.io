{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/tipe/2018-03-21-un-probleme-de-route-bonus","result":{"data":{"site":{"siteMetadata":{"title":"Alexandre Froehlich"}},"markdownRemark":{"id":"009c184e-5cb9-56de-976a-05064bf85326","excerpt":"Un petit bonus pour ce projet. Je cherche maintenant à représenter la vitesse de chaque véhicule afin d’avoir une idée plus précise sur la fluidité du trafic routier. Il y a certes peu de modifications à faire, mais cela en vaut le coup. Pourquoi une telle représentation L’idée m’est venue en lisant des articles sur la représentation de Nagel-Schreckenberg. Après avoir flâné quelques temps sur Wikipédia, j’ai décidé de changer la langue de la page afin de voir si d’autres contributeurs non francophones avaient étoffés leur page plus que ça n’est le cas sur celle française. A ma grande surprise, la page allemande du model de Nagel Schreckenberg montre une représentation du modèle plutôt ingénieuse : donner une couleur par véhicule en fonction de la vitesse de circulation de celui-ci. (voir figure ci-dessous)  Maintenant on va modifier le code source de notre étude afin d’y implémenter cette nouvelle fonctionnalité. Implémentation La première étape est de modifier la fonction qui place les véhicules. En effet, précédemment, pour placer une voiture sur la carte, la simulation ajoutait un *2 sur la case correspondante. Maintenant nous allons remplacer la fonction placerVoiture de la classe Carte par le bout de code suivant : La seule grande différence est que l’on calcule la valeur de la case par . Cela nous amène à notre seconde modification, en effet, pour détecter la présence d’une voiture, on récupérait la valeur d’une case de la carte que l’on comparait à 2. On remplace alors toutes les occurrences par  ce qui permettra de détecter la présence d’une voiture quelque soit sa vitesse. Affichage On a maintenant l’ajout des vitesses des voitures sur la carte, il est grand temps de les afficher ! Pour cela on change légèrement la liste des couleurs de matplotlib.pyplot par : Ainsi une voiture à l’arrêt sera de couleur jaune et tendra vers le rouge en accélérant, puis sera noire à vitesse maximale. Le seul problème avec matplotlib est que si il n’y a pas au moins une occurrence de chaque couleur, il n’affichera pas correctement la couleur de la route et des véhicules. On ajoute alors à la représentation de la carte une unique ligne de pixels contenant toutes les valeurs de la vitesse afin quelles soient toutes représentées : C’est tout ce qu’il y avait à faire !! (oui j’ai passé près de 2 heures sur ces modifications) Le résultat est vraiment satisfaisant par contre.","tableOfContents":"<ul>\n<li><a href=\"/tipe/2018-03-21-un-probleme-de-route-bonus/#pourquoi-une-telle-repr%C3%A9sentation\">Pourquoi une telle représentation</a></li>\n<li><a href=\"/tipe/2018-03-21-un-probleme-de-route-bonus/#impl%C3%A9mentation\">Implémentation</a></li>\n<li><a href=\"/tipe/2018-03-21-un-probleme-de-route-bonus/#affichage\">Affichage</a></li>\n</ul>","timeToRead":2,"html":"<p>Un petit bonus pour ce projet. Je cherche maintenant à représenter la vitesse de chaque véhicule afin d’avoir une idée plus précise sur la fluidité du trafic routier. Il y a certes peu de modifications à faire, mais cela en vaut le coup.</p>\n<h2 id=\"pourquoi-une-telle-représentation\" style=\"position:relative;\"><a href=\"#pourquoi-une-telle-repr%C3%A9sentation\" aria-label=\"pourquoi une telle représentation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pourquoi une telle représentation</h2>\n<p>L’idée m’est venue en lisant des articles sur la représentation de Nagel-Schreckenberg. Après avoir flâné quelques temps sur Wikipédia, j’ai décidé de changer la langue de la page afin de voir si d’autres contributeurs non francophones avaient étoffés leur page plus que ça n’est le cas sur celle française.</p>\n<p>A ma grande surprise, la <a href=\"https://de.wikipedia.org/wiki/Nagel-Schreckenberg-Modell\">page allemande du model de Nagel Schreckenberg</a> montre une représentation du modèle plutôt ingénieuse : donner une couleur par véhicule en fonction de la vitesse de circulation de celui-ci. (voir figure ci-dessous)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.5625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAB7BAAAewQHDaVRTAAACdUlEQVQoz1WTy27TQBSG//E1ju340jS+NTfbSXoht9LQBmjilCxSoVYkFNpK0JTSBRIlO4RgAd3AE4AQazbseAEkHoAnYIvEe2A7bRWOZnHmjL7z/3NGA0IIANM0B4NBmEy3UZB44aJ2Wb08mkYikbAdu7hQrJ5VwYGINMVTkMhOCadoLGNrs4Fanm7XBcsCHQIeoFzCuq5LslQulr2nHhgQi6WWuLC+XaB/y+I5Hg3V3mQbaYXZ7EJNATyoJgh35QnQRM1/4SOJyGAn9tXmvrrjPyidkvs5RW/5WHDIyQk4FnCBuRimKCrSV3S/50e91ijsxS08WCPnF46+MMounhy3paIBJ0tC2LJow6RmlCXNH/uhpQi7Djo8SpJeDW8c/y+23ytNjqhpCaZBbrahm5ydZ2bglOb3Y2Wbg8WHCd0g4iI+FhLf2YO3/P6S0ApqkFjS6aJUmoKzygc+WFAihRRRVGxtkGqFPhtkfwpH7+i9PkYb6dzoBrwiGY6u3uxKeeCHlmlQeEz4EvbvJdRFfi3Ap6D1kj17Rb0eJ573V2gngyCIRKNhXQxM0P1nPh7Gd9aBCTAPogJNYTOLzxnvHB+GzLhWgJ1CqYJyeUZZ0ZSGW1cO9PTEMQVjrmYZQ9MWzPStjL2j/WgE34zDB8bxbq5397ay15v3PMd1PaiqOh9HfXW17pea9XTO9dbrzjUvn10o1Daq1a3qeqXfzOXdrNuu3FqurgTry51O0O12IcuypmmqogqaXOEzE6bNJVNLO6hspHlG5FleFmRB5KcDohiS4HmK5pNJYeYXxIkt84etfCo5hzswWobEihcMCB3d7//fQcg/GQ5RB/leE3cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Représentation\"\n        title=\"Représentation\"\n        src=\"/static/e01948d36155b2da69f09c6d6e4e2601/8c557/NaSch.png\"\n        srcset=\"/static/e01948d36155b2da69f09c6d6e4e2601/72799/NaSch.png 320w,\n/static/e01948d36155b2da69f09c6d6e4e2601/6af66/NaSch.png 640w,\n/static/e01948d36155b2da69f09c6d6e4e2601/8c557/NaSch.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Maintenant on va modifier le code source de notre étude afin d’y implémenter cette nouvelle fonctionnalité.</p>\n<h2 id=\"implémentation\" style=\"position:relative;\"><a href=\"#impl%C3%A9mentation\" aria-label=\"implémentation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Implémentation</h2>\n<p>La première étape est de modifier la fonction qui place les véhicules. En effet, précédemment, pour placer une voiture sur la carte, la simulation ajoutait un *2 sur la case correspondante.</p>\n<p>Maintenant nous allons remplacer la fonction placerVoiture de la classe Carte par le bout de code suivant :</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">placerVoiture</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> t<span class=\"token punctuation\">,</span> voiture<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    i<span class=\"token punctuation\">,</span> j <span class=\"token operator\">=</span> voiture<span class=\"token punctuation\">.</span>getPosition<span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>grille<span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> voiture<span class=\"token punctuation\">.</span>getVitesse<span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span></code></pre></div>\n<p>La seule grande différence est que l’on calcule la valeur de la case par <code class=\"language-text\">2 + vitesse de la voiture</code>.</p>\n<p>Cela nous amène à notre seconde modification, en effet, pour détecter la présence d’une voiture, on récupérait la valeur d’une case de la carte que l’on comparait à 2. On remplace alors toutes les occurrences par <span class=\"mjx-chtml\"><span class=\"mjx-math\" aria-label=\"\\geq 2\"><span class=\"mjx-mrow\" aria-hidden=\"true\"><span class=\"mjx-mo\"><span class=\"mjx-char MJXc-TeX-main-R\" style=\"padding-top: 0.372em; padding-bottom: 0.446em;\">≥</span></span><span class=\"mjx-mn MJXc-space3\"><span class=\"mjx-char MJXc-TeX-main-R\" style=\"padding-top: 0.372em; padding-bottom: 0.372em;\">2</span></span></span></span></span> ce qui permettra de détecter la présence d’une voiture quelque soit sa vitesse.</p>\n<h2 id=\"affichage\" style=\"position:relative;\"><a href=\"#affichage\" aria-label=\"affichage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Affichage</h2>\n<p>On a maintenant l’ajout des vitesses des voitures sur la carte, il est grand temps de les afficher ! Pour cela on change légèrement la liste des couleurs de matplotlib.pyplot par :</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">[</span><span class=\"token string\">'white'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'palegreen'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'antiquewhite'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yellow'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'orangered'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'firebrick'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'darkred'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'black'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>Ainsi une voiture à l’arrêt sera de couleur jaune et tendra vers le rouge en accélérant, puis sera noire à vitesse maximale. Le seul problème avec matplotlib est que si il n’y a pas au moins une occurrence de chaque couleur, il n’affichera pas correctement la couleur de la route et des véhicules. On ajoute alors à la représentation de la carte une unique ligne de pixels contenant toutes les valeurs de la vitesse afin quelles soient toutes représentées :</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tableau <span class=\"token operator\">=</span> tableau <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">[</span>k <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token operator\">+</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>vmax<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>tableau<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token operator\">+</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>vmax<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">]</span></code></pre></div>\n<p>C’est tout ce qu’il y avait à faire !! (oui j’ai passé près de 2 heures sur ces modifications) Le résultat est vraiment satisfaisant par contre.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 825px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABZklEQVQ4y61U226DMAzt/3/W3vYw7WGdpj1MU2lLKbeShEuBxGcO0JsKVYNmBzlY0YnPsWGBCSOikeQlrLIttNF3ZxePwAxSNPSKPPtAJr5g6A2NXKIq31HjBd0xsutJwIwSCNoCbYWmzTmvQDqH1hJp+8MXGLcKMxKQVNxRttaUSz7XugJmDCjOuS5vF2mU+OatdqVsAeUtoNWWqQYUu1OOighJmYwChno/Q0OTcVPEKOBeeBz1HA2vKPeC8ThxhYi6+G8abtQGek6FU5R39W7OHI4ADpQjJ8qDVoJdQl1yg3VdptC9wkMZ4lBFA4i+HZs5gIq/2XXxiyj3u676xoeivmInwOtDlmrXTX5V7Cm73Qdt4F7hBbQ32UiELIM1T3rjY0N8y6mDU8+pEtlKxHXcU2Z/ustTVrHbUXqoIR0/IXSMXR4gMQmCU1QcKUVSR0grbskxhld5WLMHRYBVvTr/I68B/wCSiirhuN4JzQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Vitesses\"\n        title=\"Vitesses\"\n        src=\"/static/96567e490ab51b79f214e79e427353d7/d4c13/sim_vitesse.png\"\n        srcset=\"/static/96567e490ab51b79f214e79e427353d7/72799/sim_vitesse.png 320w,\n/static/96567e490ab51b79f214e79e427353d7/6af66/sim_vitesse.png 640w,\n/static/96567e490ab51b79f214e79e427353d7/d4c13/sim_vitesse.png 825w\"\n        sizes=\"(max-width: 825px) 100vw, 825px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>","frontmatter":{"date":"March 21, 2018","title":"[TIPE] Un problème de route - Bonus","slug":null,"tags":["python","TIPE","route"],"layout":"post","published":true,"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd8RRX//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAE/IV//2gAMAwEAAgADAAAAELgP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QZ//EABkQAQADAQEAAAAAAAAAAAAAAAEAEDERQf/aAAgBAQABPxBxiHPacY5X/9k=","aspectRatio":1.7699115044247788,"src":"/static/1b5f6398276a931d97403d749ceed50a/14b42/sim_vitesse_front.jpg","srcSet":"/static/1b5f6398276a931d97403d749ceed50a/f836f/sim_vitesse_front.jpg 200w,\n/static/1b5f6398276a931d97403d749ceed50a/2244e/sim_vitesse_front.jpg 400w,\n/static/1b5f6398276a931d97403d749ceed50a/14b42/sim_vitesse_front.jpg 800w,\n/static/1b5f6398276a931d97403d749ceed50a/47498/sim_vitesse_front.jpg 1200w,\n/static/1b5f6398276a931d97403d749ceed50a/0e329/sim_vitesse_front.jpg 1600w,\n/static/1b5f6398276a931d97403d749ceed50a/d8255/sim_vitesse_front.jpg 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"headings":[{"value":"Pourquoi une telle représentation","depth":2,"id":"pourquoi-une-telle-représentation"},{"value":"Implémentation","depth":2,"id":"implémentation"},{"value":"Affichage","depth":2,"id":"affichage"}]}},"pageContext":{"slug":"tipe/2018-03-21-un-probleme-de-route-bonus","previous":{"fields":{"slug":"tipe/2017-12-09-un-probleme-de-route-final"},"frontmatter":{"tags":["python","TIPE","route"],"title":"[TIPE] Un problème de route - Le final (4/4)","date":"2017-12-09T12:00:00.000Z","slug":null,"layout":"post","published":true}},"next":{"fields":{"slug":"writeups/2020-01-01-nombre-heureux"},"frontmatter":{"tags":["writeup","break-the-code","challenge","CTF"],"title":"[BTC] Nombre heureux - WriteUp","date":"2020-01-01T12:00:00.000Z","slug":null,"layout":"post","published":true}}}},"staticQueryHashes":["3433897746","712016698","781468736"]}