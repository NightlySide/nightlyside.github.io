{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/writeups/2020-01-01-nombre-heureux","result":{"data":{"site":{"siteMetadata":{"title":"Alexandre Froehlich"}},"markdownRemark":{"id":"f1015e74-93ca-51b9-a35d-974f4c8b353a","excerpt":"En fouillant dans la clé USB, vous tombez sur un dossier contenant un morceau d’annuaire téléphonique, et un fichier contenant des instructions. “Depuis quelques mois, un de mes collègues me harcèle et j’ai peur qu’il finisse par me faire du mal. Des fois qu’il tomberait sur ce document, je préfère ne pas le citer directement …” Aidez la police en trouvant l’identité de la personne dont M. X parle. Le Challenge Break the Code est une compétition du type Capture The Flag (CTF) organisée par Sopra Steria qui dure 1h30. Les équipes des grandes écoles du bassin brestois s’y affrontent sur des challenges informatiques. Ces challenges mélangent différentes compétences telles que la programmation, l’analyse de donnée et la culture du numérique. Première Analyse Nombre heureux est la 7ème épreuve de ce CTF, le but étant de trouver un numéro de téléphone présent dans l’annuaire de l’exercice. Si vous voulez essayer par vous-même, les fichiers de cet exercice sont disponibles ici. Pour retrouver ce numéro l’exercice nous donne des instructions, il s’agit de la somme des nombres qui remplissent les conditions suivantes : être compris entre 0 et 200 000 inclus être heureux être impair être premier Comme Break The Code est une compétition de rapidité, pour le prototypage de l’algorithme j’ai décidé de choisir python. Conception de l’algorithme Nombre heureux L’exercice nous définit un nombre heureux de la sorte :\nPartant de n’importe quel entier positif, remplacer cet entier par la somme des carrés des chiffres qui le composent, et répéter le processus jusqu’à ce que le nombre soit égal à 1 (auquel cas le nombre est qualifié de “heureux”). Si le processus boucle (i.e. on repasse sur un nombre déja obtenu lors d’une étape précédente), alors le chiffre n’est pas “heureux” et le processus peut être stoppé. Un algorithme naïf est une fonction récursive permettant de déterminer si le nombre est heureux ou non : La méthode que je recommande dans ce genre de cas (pour des calculs “classiques”) est de chercher un algorithme préfait sur internet.\nPar exemple celui-ci fera très bien l’affaire et pourra vous faire gagner 10-15 minutes sur l’exercice. Nombre impair et premier En python la syntaxe pour vérifier si un nombre est impair est très simple : Pour savoir si il est premier, le plus rapide sera de chercher un algorithme préfait sur internet. Dans le contexte de cet exercice j’ai utilisé celui-ci. Ecriture de la boucle Il ne reste plus qu’à itérer sur chaque nombre et de…","tableOfContents":"<ul>\n<li><a href=\"/writeups/2020-01-01-nombre-heureux/#premi%C3%A8re-analyse\">Première Analyse</a></li>\n<li>\n<p><a href=\"/writeups/2020-01-01-nombre-heureux/#conception-de-lalgorithme\">Conception de l’algorithme</a></p>\n<ul>\n<li><a href=\"/writeups/2020-01-01-nombre-heureux/#nombre-heureux\">Nombre heureux</a></li>\n<li><a href=\"/writeups/2020-01-01-nombre-heureux/#nombre-impair-et-premier\">Nombre impair et premier</a></li>\n<li><a href=\"/writeups/2020-01-01-nombre-heureux/#ecriture-de-la-boucle\">Ecriture de la boucle</a></li>\n</ul>\n</li>\n<li><a href=\"/writeups/2020-01-01-nombre-heureux/#conclusion\">Conclusion</a></li>\n</ul>","timeToRead":3,"html":"<p>En fouillant dans la clé USB, vous tombez sur un dossier contenant un morceau d’annuaire téléphonique, et un fichier contenant des instructions.</p>\n<p><em>“Depuis quelques mois, un de mes collègues me harcèle et j’ai peur qu’il finisse par me faire du mal. Des fois qu’il tomberait sur ce document, je préfère ne pas le citer directement …”</em></p>\n<p><em>Aidez la police en trouvant l’identité de la personne dont M. X parle.</em></p>\n<blockquote>\n<p>Le Challenge Break the Code est une compétition du type Capture The Flag (CTF) organisée par <a href=\"https://www.soprasteria.com/fr\">Sopra Steria</a> qui dure 1h30. Les équipes des grandes écoles du bassin brestois s’y affrontent sur des challenges informatiques. Ces challenges mélangent différentes compétences telles que la programmation, l’analyse de donnée et la culture du numérique.</p>\n</blockquote>\n<h2 id=\"première-analyse\" style=\"position:relative;\"><a href=\"#premi%C3%A8re-analyse\" aria-label=\"première analyse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Première Analyse</h2>\n<p>Nombre heureux est la 7ème épreuve de ce CTF, le but étant de trouver un numéro de téléphone présent dans l’annuaire de l’exercice.</p>\n<blockquote>\n<p>Si vous voulez essayer par vous-même, les fichiers de cet exercice sont disponibles <a href=\"/files/BTC/nombre-heureux.zip\">ici</a>.</p>\n</blockquote>\n<p>Pour retrouver ce numéro l’exercice nous donne des instructions, il s’agit de la somme des nombres qui remplissent les conditions suivantes :</p>\n<ul>\n<li>être compris entre 0 et 200 000 <strong>inclus</strong></li>\n<li>être heureux</li>\n<li>être impair</li>\n<li>être premier</li>\n</ul>\n<p>Comme Break The Code est une compétition de rapidité, pour le prototypage de l’algorithme j’ai décidé de choisir python.</p>\n<h2 id=\"conception-de-lalgorithme\" style=\"position:relative;\"><a href=\"#conception-de-lalgorithme\" aria-label=\"conception de lalgorithme permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conception de l’algorithme</h2>\n<h3 id=\"nombre-heureux\" style=\"position:relative;\"><a href=\"#nombre-heureux\" aria-label=\"nombre heureux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nombre heureux</h3>\n<p>L’exercice nous définit un nombre heureux de la sorte :\nPartant de n’importe quel entier positif, remplacer cet entier par la somme des carrés des chiffres qui le composent, et répéter le processus jusqu’à ce que le nombre soit égal à 1 (auquel cas le nombre est qualifié de “heureux”). Si le processus boucle (i.e. on repasse sur un nombre déja obtenu lors d’une étape précédente), alors le chiffre n’est pas “heureux” et le processus peut être stoppé.</p>\n<p>Un algorithme naïf est une fonction récursive permettant de déterminer si le nombre est heureux ou non :</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">heureux</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Si on entre dans une boucle</span>\n    <span class=\"token comment\"># Le nombre n'est pas heureux</span>\n    <span class=\"token keyword\">if</span> k <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token number\">37</span><span class=\"token punctuation\">,</span> <span class=\"token number\">58</span><span class=\"token punctuation\">,</span> <span class=\"token number\">89</span><span class=\"token punctuation\">,</span> <span class=\"token number\">145</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span>\n    <span class=\"token keyword\">if</span> k <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\n    s_k <span class=\"token operator\">=</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span>\n    s<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n    <span class=\"token comment\"># Calcul de la somme des carrés des chiffres de k</span>\n    <span class=\"token keyword\">for</span> l <span class=\"token keyword\">in</span> s_k<span class=\"token punctuation\">:</span>\n       s <span class=\"token operator\">+=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span>\n    <span class=\"token comment\"># On réitère</span>\n    <span class=\"token keyword\">return</span> heureux<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>La méthode que je recommande dans ce genre de cas (pour des calculs “classiques”) est de chercher un algorithme préfait sur internet.\nPar exemple <a href=\"http://www.developpement-informatique.com/article/98/exercices-corriges-python-serie-9\">celui-ci</a> fera très bien l’affaire et pourra vous faire gagner 10-15 minutes sur l’exercice.</p>\n</blockquote>\n<h3 id=\"nombre-impair-et-premier\" style=\"position:relative;\"><a href=\"#nombre-impair-et-premier\" aria-label=\"nombre impair et premier permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nombre impair et premier</h3>\n<p>En python la syntaxe pour vérifier si un nombre est impair est très simple :</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">impair</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> x<span class=\"token operator\">%</span><span class=\"token number\">2</span><span class=\"token operator\">!=</span><span class=\"token number\">0</span></code></pre></div>\n<p>Pour savoir si il est premier, le plus rapide sera de chercher un algorithme préfait sur internet. Dans le contexte de cet exercice j’ai utilisé <a href=\"https://stackoverflow.com/a/27946768\">celui-ci</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> itertools <span class=\"token keyword\">import</span> count<span class=\"token punctuation\">,</span> islice\n<span class=\"token keyword\">def</span> <span class=\"token function\">premier</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> n <span class=\"token operator\">></span> <span class=\"token number\">1</span> <span class=\"token keyword\">and</span> <span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span>n<span class=\"token operator\">%</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> islice<span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>sqrt<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"ecriture-de-la-boucle\" style=\"position:relative;\"><a href=\"#ecriture-de-la-boucle\" aria-label=\"ecriture de la boucle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ecriture de la boucle</h3>\n<p>Il ne reste plus qu’à itérer sur chaque nombre et de calculer la somme :</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span>\n    somme <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token comment\"># Pour tous les nombres de 1 à 200 000 inclus</span>\n    <span class=\"token comment\"># 0 n'étant pas impair</span>\n    <span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200001</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> heureux<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> impair<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> premier<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            somme <span class=\"token operator\">+=</span> n\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Le numéro de téléphone est : </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>somme<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>On récupère finalement en sortie de notre algorithme : <em>Le numéro de téléphone est : 254445710</em>.</p>\n<p>La toute dernière étape est de vérifier que le numéro est bien présent dans l’annuaire.\nIl est effectivement présent et il s’agit de <strong>Michael Scarn</strong> qui représente le flag (drapeau) de cet exercice.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Ce challenge est relativement simple, il s’agit plus d’une épreuve de programmation que d’une enquête digne d’un CTF.\nCependant il peut s’avérer être un véritable challenge si on souhaite recoder “à la main” chaque fonction utilisée dans cet exercice.\nInternet à été inventé dans le but de partager les connaissances. Si les CTF tels que Break The Code autorisent son utilisation durant le challenge c’est bien pour que l’on s’en serve !</p>\n<p>PS: vous retrouverez le script python complet <a href=\"/95757469c9344439c41e0f7d99e2b050/nombre-heureux.py\">ici</a>.</p>","frontmatter":{"date":"January 01, 2020","title":"[BTC] Nombre heureux - WriteUp","slug":null,"tags":["writeup","break-the-code","challenge","CTF"],"layout":"post","published":true,"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAexeNjQf/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQABBQJf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAFxABAQEBAAAAAAAAAAAAAAAAARAAMf/aAAgBAQABPyFxwiX/2gAMAwEAAgADAAAAELAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQAQESFxMf/aAAgBAQABPxCclXyYBI0Ljf/Z","aspectRatio":1.7699115044247788,"src":"/static/77a2c3002d11230764fef5f74a284e5c/14b42/annuaire.jpg","srcSet":"/static/77a2c3002d11230764fef5f74a284e5c/f836f/annuaire.jpg 200w,\n/static/77a2c3002d11230764fef5f74a284e5c/2244e/annuaire.jpg 400w,\n/static/77a2c3002d11230764fef5f74a284e5c/14b42/annuaire.jpg 800w,\n/static/77a2c3002d11230764fef5f74a284e5c/47498/annuaire.jpg 1200w,\n/static/77a2c3002d11230764fef5f74a284e5c/0e329/annuaire.jpg 1600w,\n/static/77a2c3002d11230764fef5f74a284e5c/d8255/annuaire.jpg 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"headings":[{"value":"Première Analyse","depth":2,"id":"première-analyse"},{"value":"Conception de l’algorithme","depth":2,"id":"conception-de-lalgorithme"},{"value":"Nombre heureux","depth":3,"id":"nombre-heureux"},{"value":"Nombre impair et premier","depth":3,"id":"nombre-impair-et-premier"},{"value":"Ecriture de la boucle","depth":3,"id":"ecriture-de-la-boucle"},{"value":"Conclusion","depth":2,"id":"conclusion"}]}},"pageContext":{"slug":"writeups/2020-01-01-nombre-heureux","previous":{"fields":{"slug":"tipe/2018-03-21-un-probleme-de-route-bonus"},"frontmatter":{"tags":["python","TIPE","route"],"title":"[TIPE] Un problème de route - Bonus","date":"2018-03-21T12:00:00.000Z","slug":null,"layout":"post","published":true}},"next":{"fields":{"slug":"writeups/2020-01-01-btc-morse"},"frontmatter":{"tags":["writeup","break-the-code","challenge","CTF"],"title":"[BTC] L'Histoire sans fin - WriteUp","date":"2020-01-01T12:00:00.000Z","slug":null,"layout":"post","published":true}}}},"staticQueryHashes":["3433897746","712016698","781468736"]}