{"componentChunkName":"component---src-templates-tag-tsx","path":"/tags/recette/","result":{"data":{"site":{"siteMetadata":{"title":"Alexandre Froehlich"}},"allMarkdownRemark":{"totalCount":1,"edges":[{"node":{"excerpt":"Si le titre vous rend confus c’est peut être normal. Je vais essayer d’expliquer ce qu’est le scraping et le parsing que j’ai utilisé dans le cadre de mon projet: A Chef in the Fridge v2. Motivation Dans ma précédente itération, les recettes étaient entrées à la main à partir des ingrédients déjà présent dans la base de données. Non seulement cette solution n’était clairement pas intuitive et lente, mais elle est trop peu flexible 🤢. Pour cette itération je souhaite pouvoir importer automatiquement une recette depuis n’importe quel site le permettant (comme Marmiton ou 750g). Pour cela j’ai besoin de deux outils : Un scraper pour récupérer les données de la page web de la recette Un parser pour convertir les ingrédients en objets que le serveur pourra comprendre Le scraper de recettes On va commencer par les bases avant d’attaquer le sujet. Qu’est-ce qu’un scraper ? “Le web scraping (parfois appelé harvesting) est une technique d’extraction du contenu de sites Web, via un script ou un programme, dans le but de le transformer pour permettre son utilisation dans un autre contexte.”\n— Wikipedia Autrement dit, un scraper permet de récupérer les informations d’un site comme les objets présents sur la page ou les métadonnées. Cela se fait très simplement sur Python avec les bibliothèques  (intégrée) et . Prenons l’exemple de cette recette sur marmiton concernant un cake au poires et au chocolat: https://www.marmiton.org/recettes/recette_cake-aux-poires-et-chocolat-fondant_38922.aspx. On peut récupérer le contenu de la page à l’aide des lignes suivantes : Une histoire de méta(données) Une autre chose intéressante est que les sites de recettes, pour optimiser leur classement sur les moteurs de recherche (voir Search Engine Optimization), utilisent de nombreuses méta-données et il y en a une conçue spécialement pour les recettes. Le site schema.org décrit la structure des méta-données qui concernent les recettes ici. Pour commencer ces métadonnées sont présentes dans une balise  contenant un objet JSON décrivant la recette. Essayons pour voir sur notre lien précédent : Si on essaye d’afficher le contenu de la variable  on obtient ceci : On peut maintenant récupérer les ingrédients, le temps de préparation, le nombre de personnes, les notes et les étapes de préparation de la recette et tout cela en ne cherchant que dans l’en-tête de la page ! What a time to be alive Mais nouveau problème 😢 comment faire pour que le serveur comprenne “150 g de farine” ou “1…","fields":{"slug":"devlogs/2020-12-27-recette-ingredient-parser"},"frontmatter":{"date":"2020-12-27T20:10:00.000Z","title":"Scraper de recettes et parser d'ingrédients"}}}]}},"pageContext":{"tag":"recette"}},"staticQueryHashes":["3433897746","712016698","781468736"]}