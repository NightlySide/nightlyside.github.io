{"componentChunkName":"component---src-templates-tag-tsx","path":"/tags/recette/","result":{"data":{"site":{"siteMetadata":{"title":"Alexandre Froehlich"}},"allMarkdownRemark":{"totalCount":1,"edges":[{"node":{"excerpt":"Si le titre vous rend confus câ€™est peut Ãªtre normal. Je vais essayer dâ€™expliquer ce quâ€™est le scraping et le parsing que jâ€™ai utilisÃ© dans le cadre de mon projet: A Chef in the Fridge v2. Motivation Dans ma prÃ©cÃ©dente itÃ©ration, les recettes Ã©taient entrÃ©es Ã  la main Ã  partir des ingrÃ©dients dÃ©jÃ  prÃ©sent dans la base de donnÃ©es. Non seulement cette solution nâ€™Ã©tait clairement pas intuitive et lente, mais elle est trop peu flexible ğŸ¤¢. Pour cette itÃ©ration je souhaite pouvoir importer automatiquement une recette depuis nâ€™importe quel site le permettant (comme Marmiton ou 750g). Pour cela jâ€™ai besoin de deux outils : Un scraper pour rÃ©cupÃ©rer les donnÃ©es de la page web de la recette Un parser pour convertir les ingrÃ©dients en objets que le serveur pourra comprendre Le scraper de recettes On va commencer par les bases avant dâ€™attaquer le sujet. Quâ€™est-ce quâ€™un scraper ? â€œLe web scraping (parfois appelÃ© harvesting) est une technique dâ€™extraction du contenu de sites Web, via un script ou un programme, dans le but de le transformer pour permettre son utilisation dans un autre contexte.â€\nâ€” Wikipedia Autrement dit, un scraper permet de rÃ©cupÃ©rer les informations dâ€™un site comme les objets prÃ©sents sur la page ou les mÃ©tadonnÃ©es. Cela se fait trÃ¨s simplement sur Python avec les bibliothÃ¨ques  (intÃ©grÃ©e) et . Prenons lâ€™exemple de cette recette sur marmiton concernant un cake au poires et au chocolat: https://www.marmiton.org/recettes/recette_cake-aux-poires-et-chocolat-fondant_38922.aspx. On peut rÃ©cupÃ©rer le contenu de la page Ã  lâ€™aide des lignes suivantes : Une histoire de mÃ©ta(donnÃ©es) Une autre chose intÃ©ressante est que les sites de recettes, pour optimiser leur classement sur les moteurs de recherche (voir Search Engine Optimization), utilisent de nombreuses mÃ©ta-donnÃ©es et il y en a une conÃ§ue spÃ©cialement pour les recettes. Le site schema.org dÃ©crit la structure des mÃ©ta-donnÃ©es qui concernent les recettes ici. Pour commencer ces mÃ©tadonnÃ©es sont prÃ©sentes dans une balise  contenant un objet JSON dÃ©crivant la recette. Essayons pour voir sur notre lien prÃ©cÃ©dent : Si on essaye dâ€™afficher le contenu de la variable  on obtient ceci : On peut maintenant rÃ©cupÃ©rer les ingrÃ©dients, le temps de prÃ©paration, le nombre de personnes, les notes et les Ã©tapes de prÃ©paration de la recette et tout cela en ne cherchant que dans lâ€™en-tÃªte de la page ! What a time to be alive Mais nouveau problÃ¨me ğŸ˜¢ comment faire pour que le serveur comprenne â€œ150 g de farineâ€ ou â€œ1â€¦","fields":{"slug":"devlogs/2020-12-27-recette-ingredient-parser"},"frontmatter":{"date":"2020-12-27T20:10:00.000Z","title":"Scraper de recettes et parser d'ingrÃ©dients"}}}]}},"pageContext":{"tag":"recette"}},"staticQueryHashes":["3433897746","712016698","781468736"]}