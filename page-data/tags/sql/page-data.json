{"componentChunkName":"component---src-templates-tag-tsx","path":"/tags/sql/","result":{"data":{"site":{"siteMetadata":{"title":"Alexandre Froehlich"}},"allMarkdownRemark":{"totalCount":2,"edges":[{"node":{"excerpt":"Le projet a Ã©tÃ© planifiÃ© dans lâ€™article prÃ©cÃ©dent. Je vais maintenant me concentrer sur la base de donnÃ©es ainsi que les objets que je vais stocker dans cette base de donnÃ©es. Choix de la technologie Quand il sâ€™agit de choisir une technologie pour les bases de donnÃ©es, on est confrontÃ© Ã  un trÃ¨s large choix. Que ce soit pour des structures â€œclassiquesâ€ comme MySQL, ou des technologies plus modernes se basant sur du NoSQL comme Firebase avec leur systÃ¨me de collection, il devient difficile de faire un choix. Mon application sera relativement simple dâ€™un point de vu donnÃ©es. Stocker la base de donnÃ©es sur la mÃªme machine que le serveur ne me pose pas de problÃ¨me, ce qui ouvre encore plus mon choix des possibles ğŸ˜…. Dans lâ€™introduction jâ€™expliquais hÃ©siter entre Firebase et SQLite. Cependant plusieurs arguments me font pencher vers SQLite comme le fait que jâ€™hÃ©bergerais en local cette solution (donc gratuit ğŸ¤‘) et le fait dâ€™avoir un fichier physique pour la base de donnÃ©e me permettra de faire des sauvegardes plus facilement.  Je vais implÃ©menter une base de donnÃ©es SQLite en fichier local sur la mÃªme machine que le serveur de backend. Types des donnÃ©es Sâ€™agissant dâ€™une application pour chercher et afficher des recettes Ã  partir dâ€™ingrÃ©dient, cela sera les deux premiers objets Ã  crÃ©er. Les ingrÃ©dients Dans ma prÃ©cÃ©dente itÃ©ration de lâ€™application, lâ€™ingrÃ©dient Ã©tait une structure dâ€™objet complexe. On devait y dÃ©finir son nom et aussi ses caractÃ©ristiques (lipide, glucide, etcâ€¦) je souhaitais ainsi pouvoir donner des informations nutritionnelles sur les plats ajoutÃ©s. Cependant jâ€™ai dÃ©couvert il y a peu les jeux de donnÃ©es disponibles publiquement sur le site du gouvernement franÃ§ais : https://www.data.gouv.fr/fr/. Ainsi je pense pouvoir rÃ©cupÃ©rer les qualitÃ©s nutritionnelles des ingrÃ©dients prÃ©sents dans Ciqual, en tÃ©lÃ©chargeant le jeu de donnÃ©es sur le site data.gouv.fr.  Lâ€™utilisateur nâ€™aura plus Ã  rentrer manuellement les informations, elles seront rÃ©cupÃ©rÃ©es automatiquement depuis les informations enregistrÃ©e dans la table de donnÃ©es. Lâ€™ingrÃ©dient devra alors contenir les informations suivantes :  : pour identifier lâ€™ingrÃ©dient dans la base de donnÃ©es  : le nom de lâ€™ingrÃ©dient  : les proteines pour 100g  : les glucides pour 100g  : les lipides pour 100g  : lâ€™Ã©nergie en kcal pour 100g Les recettes Voila le coeur de fonctionnement de lâ€™application : les recettes. Dans lâ€™ancienne itÃ©ration les recettes Ã©taient malheureusement entrÃ©es Ã  la main Ã  partir desâ€¦","fields":{"slug":"devlogs/2020-12-27-chef-in-fridge-v2-database"},"frontmatter":{"date":"2020-12-27T09:28:00.000Z","title":"Base de donnÃ©es et objets : A Chef in the Fridge v2"}}},{"node":{"excerpt":"Dans ma prÃ©cÃ©dente itÃ©ration du projet â€A Chef in the Fridgeâ€ lâ€™utilisateur devait rentrer manuellement le nom et le type des ingrÃ©dients que sa recette utilise. Alors non seulement cela Ã©tait trÃ¨s lourd pour lâ€™utilisateur, surtout en ce qui concerne la recherche des informations sur la composition des ingrÃ©dients. Nous allons voir comment automatiser tout Ã§a dans ce post. Le jeu de donnÃ©es Ciqual Pour commencer il nous faut une source de donnÃ©es Ã  partir de laquelle on va baser toute notre optimisation. En cherchant sur le site data.gouv.fr je suis tombÃ© sur la â€Table de composition nutritionnelle des aliments Ciqualâ€œ. Quâ€™est-ce que Ciqual ? Il sâ€™agit dâ€™une table recensant prÃ¨s de 2800 aliments, crÃ©e par lâ€™ANSES (Agence Nationale de SÃ‰curitÃ© Sanitaire, alimentation, environnement, travail). On peut retrouver dans cette tables des aliments ainsi que leur composition. Et tout Ã§a en source ouverte ! Les donnÃ©es fournies par Ciqual se dÃ©compose en 5 fichiers :  : donnÃ©es des aliments  : donnÃ©es des groupes alimentaires  : constantes pour la composition (glucides, Ã©nergie, â€¦)  : donnÃ©es de la composition des aliments  : sources des donnÃ©es de composition de chaque aliment Pour comprendre comment sont stockÃ©es ces donnÃ©es, Ciqual met Ã  disposition une documentation plutÃ´t dÃ©taillÃ©e. Format des donnÃ©es Avant de pouvoir utiliser ces donnÃ©es il est intÃ©ressant de jeter un oeil Ã  la faÃ§on dont elles sont enregistrÃ©es. Par exemple un aliment ressemble Ã  la structure suivante : Une composition dâ€™une constante pour un ingrÃ©dient donnÃ© ressemble Ã  la structure suivante : Il est Ã©vident que lâ€™on ne peut pas utiliser les donnÃ©es telles quelles. De plus essayer de charger complÃ¨tement les 2800 aliments avec une vingtaine de compositions diffÃ©rentes devient trÃ¨s lourd en mÃ©moire (prÃ¨s de 800Mo de RAM utilisÃ©e pour un programme rÃ©digÃ© avec Python). La solution pour rÃ©soudre ces deux problÃ¨mes ? Une base de donnÃ©es relationnelle. On va donc ici aussi utiliser une base de donnÃ©es spÃ©cifiquement pour les ingrÃ©dients. La base de donnÃ©es CrÃ©ation de la bdd Pour cette base de donnÃ©es je vais utiliser une fois de plus SQLite avec pour ORM SQLAlchemy. Pour rappel un ORM est : â€œun type de programme informatique qui se place en interface entre un programme applicatif et une base de donnÃ©es relationnelle pour simuler une base de donnÃ©es orientÃ©e objetâ€ â€” Wikipedia  On peut alors avec python crÃ©er une base de donnÃ©es (fichier ) et lâ€™initialiser simplement avec le code suivant : Vousâ€¦","fields":{"slug":"devlogs/2021-01-02-a-chef-in-fridge-v2-ciqual"},"frontmatter":{"date":"2021-01-02T11:54:00.000Z","title":"Composition des ingrÃ©dients avec les donnÃ©es Ciqual"}}}]}},"pageContext":{"tag":"sql"}},"staticQueryHashes":["3433897746","712016698","781468736"]}