{"componentChunkName":"component---src-templates-tag-tsx","path":"/tags/data/","result":{"data":{"site":{"siteMetadata":{"title":"Alexandre Froehlich"}},"allMarkdownRemark":{"totalCount":1,"edges":[{"node":{"excerpt":"Dans ma précédente itération du projet ”A Chef in the Fridge” l’utilisateur devait rentrer manuellement le nom et le type des ingrédients que sa recette utilise. Alors non seulement cela était très lourd pour l’utilisateur, surtout en ce qui concerne la recherche des informations sur la composition des ingrédients. Nous allons voir comment automatiser tout ça dans ce post. Le jeu de données Ciqual Pour commencer il nous faut une source de données à partir de laquelle on va baser toute notre optimisation. En cherchant sur le site data.gouv.fr je suis tombé sur la ”Table de composition nutritionnelle des aliments Ciqual“. Qu’est-ce que Ciqual ? Il s’agit d’une table recensant près de 2800 aliments, crée par l’ANSES (Agence Nationale de SÉcurité Sanitaire, alimentation, environnement, travail). On peut retrouver dans cette tables des aliments ainsi que leur composition. Et tout ça en source ouverte ! Les données fournies par Ciqual se décompose en 5 fichiers :  : données des aliments  : données des groupes alimentaires  : constantes pour la composition (glucides, énergie, …)  : données de la composition des aliments  : sources des données de composition de chaque aliment Pour comprendre comment sont stockées ces données, Ciqual met à disposition une documentation plutôt détaillée. Format des données Avant de pouvoir utiliser ces données il est intéressant de jeter un oeil à la façon dont elles sont enregistrées. Par exemple un aliment ressemble à la structure suivante : Une composition d’une constante pour un ingrédient donné ressemble à la structure suivante : Il est évident que l’on ne peut pas utiliser les données telles quelles. De plus essayer de charger complètement les 2800 aliments avec une vingtaine de compositions différentes devient très lourd en mémoire (près de 800Mo de RAM utilisée pour un programme rédigé avec Python). La solution pour résoudre ces deux problèmes ? Une base de données relationnelle. On va donc ici aussi utiliser une base de données spécifiquement pour les ingrédients. La base de données Création de la bdd Pour cette base de données je vais utiliser une fois de plus SQLite avec pour ORM SQLAlchemy. Pour rappel un ORM est : “un type de programme informatique qui se place en interface entre un programme applicatif et une base de données relationnelle pour simuler une base de données orientée objet” — Wikipedia  On peut alors avec python créer une base de données (fichier ) et l’initialiser simplement avec le code suivant : Vous…","fields":{"slug":"devlogs/2021-01-02-a-chef-in-fridge-v2-ciqual"},"frontmatter":{"date":"2021-01-02T11:54:00.000Z","title":"Composition des ingrédients avec les données Ciqual"}}}]}},"pageContext":{"tag":"data"}},"staticQueryHashes":["3433897746","712016698","781468736"]}